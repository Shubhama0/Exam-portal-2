{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shubhamkumar/Desktop/shubhdev/MERN stack/examm/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/shubhamkumar/Desktop/shubhdev/MERN stack/examm/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/shubhamkumar/Desktop/shubhdev/MERN stack/examm/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shubhamkumar/Desktop/shubhdev/MERN stack/examm/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import{useState}from\"react\";import{useNavigate,Redirect,useHistory}from\"react-router-dom\";import{useAuth}from\"../../Context/auth\";import axios from\"../Services/axiosi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var history=useHistory();// const checkuser=()=>{\n//   if(auth.user==\"abc\"){\n//     alert(\"you have NOT login, plz LOGIN / REGISTER\");\n//     history.push(\"/Login\");\n//   }\n// }\n// useEffect(()=>{\n//   checkuser();\n// },[]);\n//update fn\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];useEffect(function(){var _auth$user=auth===null||auth===void 0?void 0:auth.user,email=_auth$user.email,name=_auth$user.name,password=_auth$user.password;setName(name);setEmail(email);// setPassword(password);\n},[auth===null||auth===void 0?void 0:auth.user]);//form function\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$axios$put,data,ls;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.put(\"api/v1/user/update\",{name:name,email:email,password:password});case 4:_yield$axios$put=_context.sent;data=_yield$axios$put.data;if(data!==null&&data!==void 0&&data.error){//toast.error(data?.error);\nalert(\"error\");}else{setAuth(_objectSpread(_objectSpread({},auth),{},{user:data===null||data===void 0?void 0:data.updatedUser}));ls=localStorage.getItem(\"auth\");ls=JSON.parse(ls);ls.user=data.updatedUser;localStorage.setItem(\"auth\",JSON.stringify(ls));//toast.success(\"Profile Updated Successfully\");\nalert(\"updated sucessfully\");}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);//toast.error(\"Something went wrong\");\nalert(\"ed\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card  p-3  border  border-4 border-gray rounded-5\",style:{width:'30rem',margin:\"100px\",textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"card-title  text-info\",children:\"Your Details\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Name : \",auth.user.name]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Email : \",auth.user.email]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger mt-5\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#exampleModal\",\"data-bs-whatever\":\"@mdo\",children:\"UPDATE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:-1,\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-dialog-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"modal-title fs-5\",id:\"exampleModalLabel\",children:\"UPDATE Your Details\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"col-form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"recipient-name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",className:\"col-form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},className:\"form-control\",id:\"recipient-name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message-text\",className:\"col-form-label\",children:\" Enter New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"message-text\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-bs-dismiss\":\"modal\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmit,children:\"Save Changes\"})]})]})})})]})]})})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Redirect","useHistory","useAuth","axios","Profile","auth","setAuth","history","name","setName","email","setEmail","password","setPassword","user","handleSubmit","e","preventDefault","put","data","error","alert","updatedUser","ls","localStorage","getItem","JSON","parse","setItem","stringify","console","log","width","margin","textAlign","target","value"],"sources":["/Users/shubhamkumar/Desktop/shubhdev/MERN stack/examm/client/src/components/Profile/Profile.jsx"],"sourcesContent":["import React, { useEffect } from \"react\"\nimport { useState } from \"react\";\nimport {\n  useNavigate,\n  Redirect,\n  useHistory,\n} from \"react-router-dom\";\nimport { useAuth } from \"../../Context/auth\"\nimport axios from \"../Services/axiosi\";\n\n\nconst Profile = () => {\n\n  const [auth,setAuth]=useAuth();\n  const history = useHistory();\n\n// const checkuser=()=>{\n//   if(auth.user==\"abc\"){\n//     alert(\"you have NOT login, plz LOGIN / REGISTER\");\n//     history.push(\"/Login\");\n//   }\n// }\n// useEffect(()=>{\n//   checkuser();\n// },[]);\n\n\n\n\n//update fn\nconst [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n   const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    const { email, name, password } = auth?.user;\n    setName(name);\n\n    setEmail(email);\n    // setPassword(password);\n  }, [auth?.user]);\n\n  //form function\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const { data } = await axios.put(\"api/v1/user/update\", {\n        name,\n        email,\n        password,\n\n      });\n      if (data?.error) {\n        //toast.error(data?.error);\n        alert(\"error\");\n      } else {\n        setAuth({ ...auth, user: data?.updatedUser });\n        let ls = localStorage.getItem(\"auth\");\n        ls = JSON.parse(ls);\n        ls.user = data.updatedUser;\n        localStorage.setItem(\"auth\", JSON.stringify(ls));\n        //toast.success(\"Profile Updated Successfully\");\n        alert(\"updated sucessfully\");\n      }\n    } catch (error) {\n      console.log(error);\n      //toast.error(\"Something went wrong\");\n      alert(\"ed\");\n    }\n  };\n\n  return (\n    <>\n\n        {/* <h1 style={{margin:\"200px\"}}>Profile Page</h1> */}\n\n<div className=\"card  p-3  border  border-4 border-gray rounded-5\" style={{width: '30rem', margin:\"100px\",textAlign:\"center\"}}>\n  <div className=\"card-body\">\n    <h1 className=\"card-title  text-info\">Your Details</h1>\n    {/* <p className=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p> */}\n     \n     \n{/* <div><h2>You have Not Logind</h2></div> */}\n    <h3>Name : {auth.user.name}</h3>\n    <h4>Email : {auth.user.email}</h4> \n    \n\n{/* popup */}\n\n    <div>\n  <button type=\"button\" className=\"btn btn-danger mt-5\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\" data-bs-whatever=\"@mdo\">UPDATE</button>\n  <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n    <div className=\"modal-dialog modal-dialog-centered\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h1 className=\"modal-title fs-5\" id=\"exampleModalLabel\">UPDATE Your Details</h1>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" />\n        </div>\n        <div className=\"modal-body\">\n          <form  \n         // onSubmit={handleSubmit}\n          >\n            <div className=\"mb-3\">\n              <label htmlFor=\"name\" className=\"col-form-label\">Name</label>\n              <input type=\"text\" className=\"form-control\" id=\"recipient-name\" \n                    value={name}\n                    onChange={(e) => setName(e.target.value)} />\n            </div>\n\n            <div className=\"mb-3\">\n              <label htmlFor=\"Email\" className=\"col-form-label\">Email</label>\n              <input type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)} className=\"form-control\" id=\"recipient-name\" />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"message-text\" className=\"col-form-label\"> Enter New Password</label>\n              <input className=\"form-control\" id=\"message-text\"  type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)} />\n            </div>\n            {/* <button type=\"submit\"> update</button> */}\n          </form>\n        </div>\n        <div className=\"modal-footer\">\n          <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"submit\" className=\"btn btn-primary\"onClick={handleSubmit} >Save Changes</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n\n\n    {/* <a href=\"#\" className=\"btn btn-danger mt-5\">UPDATE</a> */}\n  </div>\n</div>\n\n\n\n\n\n\n    </>\n  )\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}